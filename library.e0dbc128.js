function e(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},o={},s=r.parcelRequired7c6;null==s&&((s=function(e){if(e in a)return a[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},r.parcelRequired7c6=s),s.register("kyEFX",(function(t,r){var a,o;e(t.exports,"register",(function(){return a}),(function(e){return a=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var s={};a=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)s[t[r]]=e[t[r]]},o=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s.register("1Ea6K",(function(r,a){e(r.exports,"renderMovies",(function(){return n}));var o=s("ahbk6");function n(e){const r=JSON.parse(localStorage.getItem("MOVIE_GENRES"));return e.map((e=>{const{poster_path:a,title:s,id:n,genre_ids:i=[],release_date:c=""}=e,l=i.map((e=>r[e]));return`<li class="card-set__item movie-card"><a href="#?" class="movie-card__link" data-id=${n}><div class="movie-card__holder"><img src=${a?"https://image.tmdb.org/t/p/w400"+a:t(o)} alt="${s} poster" class="movie-card__img" width="100%"></div>\n        <p class="movie-card__title">${s}\n            </p><p class="movie-card__genre">${l.length<3?l.join(", "):l.slice(0,2).join(", ")+", Other"} ${l.length&&c?"|":""}\n                <span class="movie-card__date">${c.slice(0,4)}</span>\n            </p></a></li>`})).join("")}})),s.register("ahbk6",(function(e,t){e.exports=new URL(s("kyEFX").resolve("1aYh8"),import.meta.url).toString()})),s.register("2KWsc",(function(t,r){e(t.exports,"default",(function(){return a}));class a{constructor(){this.searchQuery="",this.page=1}async fetchMovies(){const e=`https://api.themoviedb.org/3/trending/movie/week?api_key=4c6e55add2f00844e9f979bd7b0fac7c&${new URLSearchParams({page:this.page})}`;localStorage.getItem("MOVIE_GENRES")||this.getGenres();try{const t=await fetch(e),r=await t.json();return localStorage.removeItem("CURRENT_ITEMS"),localStorage.setItem("CURRENT_ITEMS",JSON.stringify(r)),this.incrementPage(),console.log(r),r}catch(e){console.error(e)}}async searchMovies(){const e=` https://api.themoviedb.org/3/search/movie?api_key=4c6e55add2f00844e9f979bd7b0fac7c&${new URLSearchParams({page:this.page,query:this.searchQuery})}`;localStorage.getItem("MOVIE_GENRES")||this.getGenres();try{const t=await fetch(e),r=await t.json();return localStorage.removeItem("CURRENT_ITEMS"),localStorage.setItem("CURRENT_ITEMS",JSON.stringify(r)),console.log(r),r}catch(e){console.error(e)}}async getGenres(){try{const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=4c6e55add2f00844e9f979bd7b0fac7c"),t=await e.json(),r={};return t.genres.forEach((({id:e,name:t})=>r[e]=t)),localStorage.setItem("MOVIE_GENRES",JSON.stringify(r)),console.log(t),t}catch(e){console.error(e)}}incrementPage(){return this.page+=1}resetPage(){return this.page=1}get query(){return this.searchQuery}set query(e){this.searchQuery=e}}})),s.register("krGWQ",(function(t,r){e(t.exports,"refs",(function(){return a}));const a={searchForm:document.querySelector(".search-form"),galleryContainer:document.querySelector(".gallery"),loadeMoreBtn:document.querySelector('button[type="submit"]'),cardSetEl:document.querySelector(".card-set"),btnWatchAdd:document.querySelector(".add-watch"),btnQuechAdd:document.querySelector(".add-que"),libraryWatchedList:document.querySelector(".watched-library-list"),libraryQueList:document.querySelector(".que-library-list"),movieModal:document.querySelector(".modal")}})),s.register("gBTsr",(function(r,a){e(r.exports,"openModal",(function(){return c}));var o=s("krGWQ"),n=s("ahbk6"),i=s("bP8zf");function c(e,r){const a=e.find((e=>e.id==r));localStorage.getItem("QUEUE_MOVIES")||localStorage.setItem("QUEUE_MOVIES",JSON.stringify([])),localStorage.getItem("WATCHED_MOVIES")||localStorage.setItem("WATCHED_MOVIES",JSON.stringify([])),function({poster_path:e,title:r,id:a,genre_ids:s=[],release_date:i="",overview:c,vote_average:l,vote_count:d,popularity:u,original_title:m}){const g="https://image.tmdb.org/t/p/w400",f=JSON.parse(localStorage.getItem("MOVIE_GENRES")),E=s.map((e=>f[e]));o.refs.movieModal.innerHTML=`<button class="btn-modal-close" type="button"></button>\n  <div class="modal-movie"> <img src=${e?g+e:t(n)} alt="${r} poster" class="modal-movie__img"></div>\n     <div class="modal__content">\n      <h2 class='modal__title'>${r}</h2>\n    <table class='modal-info'>\n      <tr>\n        <td class='modal-info__title'>Vote / Votes</td>\n        <td class='modal-info__value'>\n          <span class='modal-info__rate'>${l?l?.toFixed(1):"?"}</span>\n          /\n          <span class='modal-info__rate'>${d}</span>\n        </td>\n      </tr>\n      <tr>\n        <td class='modal-info__title'>Popularity</td>\n        <td class='modal-info__value'>${u?.toFixed(1)}</td>\n      </tr>\n      <tr>\n        <td class='modal-info__title'>Original Title</td>\n        <td class='modal-info__value'>${m}</td>\n      </tr>\n      <tr>\n        <td class='modal-info__title'>Genre</td>\n        <td class='modal-movie-info__value'>${E.join(", ")}</td>\n      </tr>\n    </table>\n    <div class='modal-about'>\n      <h3 class='modal-about__title'>About</h3>\n      <p class='modal-about__desc'>${c}</p>\n    </div>\n    <div class="modal__text"></div>\n    <div class="modal-movie-btn">\n      <button type="button" class="btn-modal btn-modal__watched" data-id=${a}>${localStorage.getItem("WATCHED_MOVIES")?.includes(a)?"REMOVE FROM WATCHED":"ADD TO WATCHED"}</button>\n      <button type="button" class="btn-modal btn-modal__queue" data-id=${a}>${localStorage.getItem("QUEUE_MOVIES")?.includes(a)?"REMOVE FROM QUEUE":"ADD TO QUEUE"}</button>\n    </div>\n  </div>`}(a),o.refs.movieModal.parentElement.classList.toggle("is-hidden"),document.addEventListener("keydown",l),o.refs.movieModal.parentElement.addEventListener("click",l),o.refs.movieModal.querySelector(".btn-modal__watched").addEventListener("click",(function(e){const t=JSON.parse(localStorage.getItem("WATCHED_MOVIES")),o=t.findIndex((e=>e.id==r));-1==o?t.unshift(a):t.splice(o,1);localStorage.setItem("WATCHED_MOVIES",JSON.stringify(t)),e.target.textContent="ADD TO WATCHED"===e.target.textContent?"REMOVE FROM WATCHED":"ADD TO WATCHED",i.default.refreshMarkup()})),o.refs.movieModal.querySelector(".btn-modal__queue").addEventListener("click",(function(e){const t=JSON.parse(localStorage.getItem("QUEUE_MOVIES")),o=t.findIndex((e=>e.id==r));-1==o?t.push(a):t.splice(o,1);e.target.textContent="ADD TO QUEUE"===e.target.textContent?"REMOVE FROM QUEUE":"ADD TO QUEUE",localStorage.setItem("QUEUE_MOVIES",JSON.stringify(t)),i.default.refreshMarkup()}))}function l(e){(e.target.classList.contains("backdrop")||e.target.classList.contains("btn-modal-close")||"Escape"===e.key)&&(o.refs.movieModal.parentElement.classList.add("is-hidden"),document.removeEventListener("keydown",l),e.currentTarget.removeEventListener("click",l))}})),s.register("bP8zf",(function(t,r){e(t.exports,"default",(function(){return n}));var a=s("1Ea6K"),o=s("krGWQ");var n=new class{set currentField(e){this.field=e}get currentField(){return this.field}refreshMarkup(){"queue"!==this.field?"watched"===this.field&&this.showWatched():this.showQueue()}showQueue(){const e=(0,a.renderMovies)(JSON.parse(localStorage.getItem("QUEUE_MOVIES")));o.refs.cardSetEl.innerHTML=e,this.currentField="queue"}showWatched(){const e=(0,a.renderMovies)(JSON.parse(localStorage.getItem("WATCHED_MOVIES")));o.refs.cardSetEl.innerHTML=e,this.currentField="watched"}}})),s.register("4S0r6",(function(e,t){const r=document.querySelector("#switch"),a=document.querySelector(".theme"),o=document.querySelector("footer"),s=document.querySelector(".footer__container"),n=document.querySelectorAll(".movie-card__title"),i=document.querySelectorAll(".movie-card__genre"),c=document.querySelector(".anim-stars");"true"===localStorage.getItem("isDark")?(document.body.classList.add("dark"),a.classList.add("active"),r.classList.add("active"),o.classList.add("active"),s.classList.add("footer--dark"),c.classList.add("stars"),n.forEach((e=>{e.classList.add("active")})),i.forEach((e=>{e.classList.add("active")}))):(document.body.classList.remove("dark"),a.classList.remove("active"),r.classList.remove("active"),o.classList.remove("active"),s.classList.remove("footer--dark"),c.classList.remove("stars"),n.forEach((e=>{e.classList.remove("active")})),i.forEach((e=>{e.classList.remove("active")}))),document.querySelector("#theme").addEventListener("click",(()=>{const e=document.body.classList.toggle("dark");a.classList.toggle("active"),r.classList.toggle("active"),o.classList.toggle("active"),s.classList.toggle("footer--dark"),c.classList.toggle("stars"),n.forEach((e=>{e.classList.toggle("active")})),i.forEach((e=>{e.classList.toggle("active")})),(e=>{localStorage.setItem("isDark",e)})(e)}))})),s("kyEFX").register(JSON.parse('{"eM9ss":"library.e0dbc128.js","1aYh8":"default-poster.ff5560e1.jpg"}'));
//# sourceMappingURL=library.e0dbc128.js.map
